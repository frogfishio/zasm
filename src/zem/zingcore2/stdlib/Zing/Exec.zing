module Zing路Exec.

use Zing路Result.
use Zing路Error.
use Zing路Str.

extern zi_exec_run(i64, i32) -> i32.

execFail trace: trace msg: msg[
  ret (Fail e: (Err kind: #ExecError trace: trace msg: msg span: nil stage: #exec code: trace))
].

;; Run a host command string (UTF-8).
;; Returns the process exit status (0..255).
export run cmd: cmd[
  r := zi_exec_run((cmd ptr), (cmd len)).
  (r < 0) ifTrue: [ ret (execFail trace: #t_exec_run msg: "exec:run") ].
  ret (Ok v: r)
].

