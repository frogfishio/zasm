{"ir":"zasm-v1.1","k":"dir","d":"EXTERN","args":[{"t":"str","v":"c"},{"t":"str","v":"zi_ctl"},{"t":"sym","v":"zi_ctl"}],"loc":{"line":1}}
{"ir":"zasm-v1.1","k":"dir","d":"EXTERN","args":[{"t":"str","v":"c"},{"t":"str","v":"zi_write"},{"t":"sym","v":"zi_write"}],"loc":{"line":2}}
{"ir":"zasm-v1.1","k":"dir","d":"PUBLIC","args":[{"t":"sym","v":"zir_main"}],"loc":{"line":3}}

{"ir":"zasm-v1.1","k":"label","name":"zir_main","loc":{"line":5}}
{"ir":"zasm-v1.1","k":"instr","m":"DROP","ops":[{"t":"reg","v":"HL"}],"loc":{"line":6}}

{"ir":"zasm-v1.1","k":"instr","m":"CALL","ops":[{"t":"sym","v":"zi_write"},{"t":"num","v":1},{"t":"sym","v":"msg_begin"},{"t":"num","v":6}],"loc":{"line":8}}

{"ir":"zasm-v1.1","k":"instr","m":"CALL","ops":[{"t":"sym","v":"zi_ctl"},{"t":"sym","v":"req"},{"t":"num","v":24},{"t":"sym","v":"resp"},{"t":"num","v":512}],"loc":{"line":10}}
{"ir":"zasm-v1.1","k":"instr","m":"CP","ops":[{"t":"reg","v":"HL"},{"t":"num","v":0}],"loc":{"line":11}}
{"ir":"zasm-v1.1","k":"instr","m":"JR","ops":[{"t":"sym","v":"LE"},{"t":"lbl","v":"fail"}],"loc":{"line":12}}

{"ir":"zasm-v1.1","k":"instr","m":"CALL","ops":[{"t":"sym","v":"zi_write"},{"t":"num","v":1},{"t":"sym","v":"msg_ok"},{"t":"num","v":3}],"loc":{"line":14}}
{"ir":"zasm-v1.1","k":"instr","m":"LD","ops":[{"t":"reg","v":"HL"},{"t":"num","v":0}],"loc":{"line":15}}
{"ir":"zasm-v1.1","k":"instr","m":"RET","ops":[],"loc":{"line":16}}

{"ir":"zasm-v1.1","k":"label","name":"fail","loc":{"line":18}}
{"ir":"zasm-v1.1","k":"instr","m":"CALL","ops":[{"t":"sym","v":"zi_write"},{"t":"num","v":1},{"t":"sym","v":"msg_err"},{"t":"num","v":4}],"loc":{"line":19}}
{"ir":"zasm-v1.1","k":"instr","m":"LD","ops":[{"t":"reg","v":"HL"},{"t":"num","v":1}],"loc":{"line":20}}
{"ir":"zasm-v1.1","k":"instr","m":"RET","ops":[],"loc":{"line":21}}

{"ir":"zasm-v1.1","k":"dir","d":"STR","name":"msg_begin","args":[{"t":"str","v":"BEGIN\n"}],"loc":{"line":23}}
{"ir":"zasm-v1.1","k":"dir","d":"STR","name":"msg_ok","args":[{"t":"str","v":"OK\n"}],"loc":{"line":24}}
{"ir":"zasm-v1.1","k":"dir","d":"STR","name":"msg_err","args":[{"t":"str","v":"ERR\n"}],"loc":{"line":25}}

{"ir":"zasm-v1.1","k":"dir","d":"DB","name":"req","args":[{"t":"num","v":90},{"t":"num","v":67},{"t":"num","v":76},{"t":"num","v":49},{"t":"num","v":1},{"t":"num","v":0},{"t":"num","v":1},{"t":"num","v":0},{"t":"num","v":1},{"t":"num","v":0},{"t":"num","v":0},{"t":"num","v":0},{"t":"num","v":0},{"t":"num","v":0},{"t":"num","v":0},{"t":"num","v":0},{"t":"num","v":0},{"t":"num","v":0},{"t":"num","v":0},{"t":"num","v":0},{"t":"num","v":0},{"t":"num","v":0},{"t":"num","v":0},{"t":"num","v":0}],"loc":{"line":27}}
{"ir":"zasm-v1.1","k":"dir","d":"RESB","name":"resp","args":[{"t":"num","v":512}],"loc":{"line":28}}
